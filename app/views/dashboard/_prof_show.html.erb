<div class="errors_box">
  <% flash.each do |key, value| %>
    <% unless key == "notice"%>
  <p>  <%= "#{key.capitalize}! #{value}" %>  </p>
  <% end %>
<% end %>
</div>
<div class="prof_show_back">
  <div class="prof_show_head">
    <h4> <%= @prof.name %> </h4>
    <div class="prof_show_image">
      <div class="pay_box">
        <i class="material-icons">account_box</i>
        <div class="pay" id="customButton<%= @prof.id %>"><h5>Pay<h5></div>
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">
<style type="text/css">
	.st0{stroke:green;stroke-miterlimit:10;}
	.st1{fill:#009245;}
</style>
<circle class="st0" cx="50.2" cy="49.3" r="48"/>
<g>
	<path class="st1" d="M12,24.6v40h76.4v-40H12z M39.4,59.6H25.7c0-4.2-3.7-7.5-8.2-7.5V39.6c6,0,10.9-4.5,10.9-10h11
		c-3.4,3.7-5.5,9-5.5,15S36,56,39.4,59.6z M82.9,52.1c-4.4,0-8.2,3.4-8.2,7.5H61c3.4-3.7,5.5-9,5.5-15s-2.1-11.3-5.5-15h11
		c0,5.5,4.9,10,10.9,10V52.1z M12,69.6h76.4v5H12V69.6z"/>
</g>
</svg>

      </div>
    </div>
    <div class="prof_show_social">
      <ul>
          <li>
          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
      	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">
      <ellipse class="st0 twitter" cx="50" cy="49.8" rx="48.8" ry="48.1"/>
      <g>
      	<path d="M76.7,31.4c-1.9,0.9-4,1.5-6.2,1.8c2.2-1.4,3.9-3.7,4.7-6.3c-2.1,1.3-4.4,2.3-6.8,2.8c-2-2.2-4.8-3.6-7.8-3.6
      		c-5.9,0-10.7,5.1-10.7,11.5c0,0.9,0.1,1.8,0.3,2.6c-8.9-0.5-16.8-5-22.1-12c-0.9,1.7-1.5,3.7-1.5,5.8c0,4,1.9,7.5,4.8,9.5
      		c-1.8,0-3.4-0.6-4.9-1.4v0.1c0,5.6,3.7,10.2,8.6,11.2c-0.9,0.3-1.9,0.4-2.8,0.4c-0.7,0-1.4-0.1-2-0.2c1.4,4.6,5.3,7.9,10,8
      		c-3.7,3.1-8.3,4.9-13.3,4.9c-0.9,0-1.7-0.1-2.6-0.2c4.7,3.3,10.4,5.2,16.4,5.2c19.8,0,30.6-17.5,30.6-32.6c0-0.5,0-1,0-1.5
      		C73.5,35.7,75.3,33.7,76.7,31.4z"/>
      </g>
      </svg>
        </li>
          <li>
          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
      	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">
      <style type="text/css">
      	.st0{fill:none;stroke:#000000;stroke-miterlimit:10;}
      </style>
      <ellipse class="st0 facebook" cx="50" cy="49.8" rx="48.8" ry="48.1"/>
      <g>
      	<path d="M72.2,24.8H27.8c-1.5,0-2.8,1.2-2.8,2.8V72c0,1.5,1.2,2.8,2.8,2.8H50V55h-6v-7.3h6v-5.4c0-6.5,4.5-10,10.2-10
      		c2.8,0,5.7,0.2,6.4,0.3v6.7h-4.6c-3.1,0-3.7,1.5-3.7,3.7v4.6h7.5l-1,7.3h-6.5v19.8h13.9c1.5,0,2.8-1.2,2.8-2.8V27.5
      		C75,26,73.8,24.8,72.2,24.8z"/>
      </g>
      </svg>
          </li>
          <li>
            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 100 100" style="enable-background:new 0 0 100 100;" xml:space="preserve">
<style type="text/css">
	.st0{fill:none;stroke:#000000;stroke-miterlimit:10;}
</style>
<ellipse class="st0 linkedin" cx="50" cy="49.8" rx="48.8" ry="48.1"/>
<g>
	<path d="M71,25H29.3C27,25,25,26.6,25,28.9v41.8c0,2.3,2,4.3,4.3,4.3H71c2.3,0,4-2,4-4.3V28.9C75,26.6,73.3,25,71,25z M40.5,66.7
		h-7.2V44.4h7.2V66.7z M37.2,41L37.2,41c-2.3,0-3.8-1.7-3.8-3.8c0-2.2,1.5-3.8,3.9-3.8S41,35,41,37.2C41,39.3,39.5,41,37.2,41z
		 M66.7,66.7h-7.2V54.5c0-2.9-1-4.9-3.6-4.9c-2,0-3.2,1.3-3.7,2.6C52,52.7,52,53.3,52,54v12.7h-7.2V44.4H52v3.1
		c1-1.5,2.7-3.6,6.5-3.6c4.7,0,8.3,3.1,8.3,9.8V66.7z"/>
</g>
</svg>
          </li>
      </ul>
    </div>
  </div>
  <div class="prof_show_right">
    <i class="material-icons close_prof_show" onclick="closeProfModal()">close</i>
    <div class="prof_show_title">
      <label>Job Title:</label>
      <h6><%= @prof.job_title  %></h6>
    </div>
    <hr>
      <div class="prof_show_license">
        <label>License Number:</label>
        <h6><%= @prof.license_num %></h6>
      </div>
  </div>

</div>
<%= form_tag charges_path, id: 'chargeForm' do %>
            <div id="submit-text"></div>
            <%= hidden_field_tag "price", @job.rate %>
            <%= hidden_field_tag "prof_id", @prof.id %>
            <%= hidden_field_tag 'stripeToken' %>
            <%= hidden_field_tag 'stripeEmail' %>
            <%= hidden_field_tag "booking_id", @booking_id %>
<script>

           let submittedForm = false
           var handler = StripeCheckout.configure({
             key: '<%= ENV["STRIPE_PUBLISHABLE_KEY"] %>',
             allowRememberMe: true,
             token: function(token) {
               document.getElementById("stripeToken").value = token.id;
               document.getElementById("stripeEmail").value = token.email;
               document.getElementById("chargeForm").submit();
               submittedForm = true;
               $('#submit-text').html('Processing, stand by');

             },
             closed: function(){
               if (submittedForm == true) {
                 $('#customButton<%= @prof.id %>').addClass("disabled")
               } else {
                 return false
               }
             }

           });

           document.getElementById('customButton<%= @prof.id %>').addEventListener('click', function(e) {
             // Open Checkout with further options
             handler.open({
               name: 'Yoopy',
               description: "Thank you for using Yoopy!" ,
               amount: "<%= @job.rate * 100 %>",

             }
           );
           e.preventDefault();
         });
       </script>
       <% end %>
